# Финальный отчет по анализу цен товаров

**Дата создания:** 2025-10-12

## Обзор

Проведен полный анализ цен товаров в базе данных DOMEO. Выявлены и частично исправлены проблемы с некорректно заполненными полями цен.

## Статистика

| Показатель | Количество |
|:-----------|:-----------|
| **Всего товаров в базе данных** | 3,843 |
| **Товаров с проблемами цен** | 200 |
| **Автоматически исправлено** | 5 |
| **Требует ручной корректировки** | 195 |

## Детализация проблем

### ✅ Исправленные товары (5 шт.)

Товары, у которых были найдены корректные числовые цены в поле `Цена ррц (включая цену полотна, короба, наличников, доборов)`:

- **SKU_1759425167584_htu32zohy**: базовая цена 0 → 18833
- **SKU_1759425167593_gq1mz1z27**: базовая цена 0 → 18833  
- **SKU_1759425167606_0x5koakpl**: базовая цена 0 → 18833
- **SKU_1759425167616_dgesbbb05**: базовая цена 0 → 18833
- **SKU_1759425170771_ni8jdjwu0**: базовая цена 0 → 29443

Для всех исправленных товаров также добавлена РРЦ (рассчитана как базовая цена × 1.3).

### ❌ Товары, требующие ручной корректировки (195 шт.)

Все эти товары имеют в поле `Цена ррц (включая цену полотна, короба, наличников, доборов)` текстовое значение `"позже"` вместо числовой цены.

**Примеры проблемных товаров:**
- SKU_1759425200016_q8c0ph9hf
- SKU_1759425200027_wfzz38gcg
- SKU_1759425200041_d54ulfpxg
- ... (и еще 192 товара)

**Распределение по категориям:**
- **Межкомнатные двери**: 192 товара
- **Комплекты фурнитуры**: 3 товара

## Рекомендации по дальнейшим действиям

### 1. Ручная корректировка цен

Для 195 товаров с текстовым значением "позже" в поле цены необходимо:

1. **Получить актуальные цены** от поставщика для этих товаров
2. **Обновить поле** `Цена ррц (включая цену полотна, короба, наличников, доборов)` с числовыми значениями
3. **Заполнить поле** `base_price` в таблице `products`
4. **Добавить поле** `РРЦ` в `properties_data` (рассчитать как базовая цена × 1.3)

### 2. Массовое обновление через админ-панель

Рекомендуется использовать функцию импорта товаров в админ-панели (`/admin/catalog/import`) для массового обновления цен:

1. Подготовить Excel-файл с колонками:
   - `SKU` - артикул товара
   - `Цена ррц (включая цену полотна, короба, наличников, доборов)` - новая цена
   - `base_price` - базовая цена (можно скопировать из РРЦ)
   - `РРЦ` - рекомендуемая розничная цена (рассчитать как base_price × 1.3)

2. Выполнить импорт через админ-панель

### 3. Валидация при импорте

В будущем рекомендуется добавить валидацию цен при импорте товаров:
- Проверка на числовые значения в полях цен
- Предупреждение при обнаружении текстовых значений типа "позже"
- Автоматическое заполнение связанных полей цен

## Созданные файлы

В процессе анализа созданы следующие отчеты:

1. **`unfixed_text_prices_2025-10-12.csv`** - детальный список товаров, требующих ручной корректировки
2. **`fixed_prices_2025-10-12.csv`** - отчет об автоматически исправленных товарах
3. **`invalid_prices_2025-10-12.csv`** - первоначальный список проблемных товаров
4. **`invalid_prices_detailed_2025-10-12.json`** - детальный JSON-отчет с полными данными

## Заключение

Система автоматического исправления цен успешно обработала 5 товаров из 200 проблемных. Оставшиеся 195 товаров требуют ручной корректировки, так как содержат текстовые значения вместо числовых цен.

После выполнения ручной корректировки рекомендуется повторно запустить проверку для подтверждения исправления всех проблем.

---
*Этот отчет сгенерирован автоматически.*
